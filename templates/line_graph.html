{% extends "main.html" %}
{% block title %}Graph Plot Page{% endblock%}
{%block content%}
<h2>Covid 19 Cases</h2>
{% with messages=get_flashed_messages() %}
{%if messages%}
<p>{{messages[0]}}</p>
{% endif %}
{% endwith  %}
<form action="# " method="POST">
<p>State</p>
<input list='count' placeholder="Select a State" name="s1" value="{{ a if a}}" >
<input type="submit" name="submit">
<datalist id="count">
  {% for i in l1%}
  <option value="{{i}}"></option>
  {%endfor%}
</datalist>
</form>
<h1>{{a}}</h1>
<canvas id="chart" width="600" height="400"></canvas>
   <script>

     // bar chart data
     var barData = {
       labels : [
         {% for item in labels %}
           "{{ item }}",
         {% endfor %}
       ],

       datasets : [{
         fillColor: "rgba(151,187,205,0.2)",
         strokeColor: "rgba(151,187,205,1)",
         pointColor: "rgba(151,187,205,1)",
         pointStrokeColor: "#fff",
         pointHighlightFill: "#fff",
         pointHighlightStroke: "rgba(151,187,205,1)",
         bezierCurve : false,
         data : [
     {% for item in values %}
             {{ item }},
           {% endfor %}]
         }
 ]
     }

     Chart.defaults.global.animationSteps = 50;
     Chart.defaults.global.tooltipYPadding = 16;
     Chart.defaults.global.tooltipCornerRadius = 0;
     Chart.defaults.global.tooltipTitleFontStyle = "normal";
     Chart.defaults.global.tooltipFillColor = "rgba(0,0,0,0.8)";
     Chart.defaults.global.animationEasing = "easeOutBounce";
     Chart.defaults.global.responsive = false;
     Chart.defaults.global.scaleLineColor = "black";
     Chart.defaults.global.scaleFontSize = 16;

     // get bar chart canvas
     var mychart = document.getElementById("chart").getContext("2d");

     steps = 10
     max = {{ max }}
     // draw bar chart
     var LineChartDemo = new Chart(mychart).Line(barData, {
       scaleOverride: true,
       scaleSteps: steps,
       scaleStepWidth: Math.ceil(max / steps),
       scaleStartValue: 0,
       scaleShowVerticalLines: true,
       scaleShowGridLines : true,
       barShowStroke : true,
       scaleShowLabels: true,
       bezierCurve: false,
     });

   </script>
{%endblock%}
